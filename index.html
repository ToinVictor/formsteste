<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pr√©-Teste - Termodin√¢mica</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }
      h1 {
        color: #333;
        text-align: center;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
      }
      .questao {
        margin-bottom: 25px;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 10px;
        background-color: #f9f9f9;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .questao strong {
        color: #007bff;
        font-size: 1.1em;
      }
      .enunciado {
        margin: 15px 0;
        padding: 10px;
        background-color: #fff;
        border-left: 4px solid #007bff;
        border-radius: 4px;
        font-style: italic;
        color: #555;
      }
      .alternativas {
        margin-top: 15px;
        padding: 15px;
        background-color: #fff;
        border-radius: 6px;
      }
      .alternativas label {
        display: block;
        margin: 8px 0;
        padding: 8px;
        border-radius: 4px;
        transition: background-color 0.2s;
      }
      .alternativas label:hover {
        background-color: #f0f8ff;
      }
      input[type="radio"] {
        margin-right: 10px;
      }
      button {
        display: block;
        width: 100%;
        padding: 15px 30px;
        font-size: 18px;
        font-weight: bold;
        color: white;
        background-color: #007bff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        margin: 30px 0;
        transition: background-color 0.3s;
      }
      button:hover {
        background-color: #0056b3;
      }
      #resultado {
        text-align: center;
        padding: 20px;
        margin: 20px 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 10px;
        font-size: 1.5em;
      }
      #resultadoGeral {
        margin-top: 40px;
        padding: 25px;
        background: #f4f4f4;
        border-radius: 10px;
        border: 1px solid #ddd;
      }
      #resultadoGeral h2 {
        color: #333;
        border-bottom: 2px solid #28a745;
        padding-bottom: 10px;
      }
      #dadosGerais {
        font-size: 0.95em;
        line-height: 1.6;
      }
      .gabarito-indicador {
        font-size: 0.85em;
        color: #28a745;
        margin-left: 10px;
      }
    </style>
  </head>
  <body>
    <h1>PR√â-TESTE - TERMODIN√ÇMICA</h1>

    <form id="formulario">
      <div id="questoes"></div>
      <button type="button" onclick="corrigir()">Enviar e Ver Resultado</button>
    </form>

    <div id="resultado"></div>

    <div id="resultadoGeral">
      <h2>Resultados Gerais da Turma</h2>
      <div id="dadosGerais"></div>
    </div>

    <script type="module">
      // üî• IMPORTA FIREBASE (VERS√ÉO 12.9.0)
      import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
      import {
        getDatabase,
        ref,
        push,
        onValue,
      } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-database.js";

      // üî• CONFIGURA√á√ÉO FIREBASE
      const firebaseConfig = {
        apiKey: "AIzaSyCU5KJPxtb99hlzfq6JZVx-wPThWDpYcEQ",
        authDomain: "airtonprojeto-e08ed.firebaseapp.com",
        databaseURL: "https://airtonprojeto-e08ed-default-rtdb.firebaseio.com",
        projectId: "airtonprojeto-e08ed",
        storageBucket: "airtonprojeto-e08ed.firebasestorage.app",
        messagingSenderId: "340143929205",
        appId: "1:340143929205:web:bd6eb2c545605641e1453c",
        measurementId: "G-WVRLMJ5MCY",
      };

      // Inicializa Firebase
      const app = initializeApp(firebaseConfig);
      const database = getDatabase(app);
      const respostasRef = ref(database, "respostas");

      // ---------------- GABARITO ----------------
      const gabarito = {
        1: "C",
        2: "C",
        3: "A",
        4: "D",
        5: "B",
        6: "B",
        7: "A",
        8: "B",
        9: "D",
        10: "C",
        11: "C",
        12: "A",
        13: "A",
        14: "B",
        15: "D",
        16: "C",
      };

      // ---------------- ENUNCIADOS E ALTERNATIVAS ----------------
      const questoes = {
        1: {
          enunciado: "Podemos dizer que a termodin√¢mica estuda principalmente:",
          alternativas: {
            A: "O movimento dos planetas.",
            B: "A evolu√ß√£o das esp√©cies.",
            C: "O calor, a energia e suas transforma√ß√µes.",
            D: "A forma√ß√£o das estrelas.",
          },
        },
        2: {
          enunciado:
            "Na maioria das vezes, usamos calor e temperatura para definir o mesmo evento, entretanto, essa utiliza√ß√£o n√£o est√° correta. Marque o item que melhor define os conceitos de calor e temperatura, respectivamente:",
          alternativas: {
            A: "Energia el√©trica transferida entre objetos / Energia qu√¢ntica associada a agita√ß√£o de objetos.",
            B: "Energia cin√©tica transferida entre corpos. / Energia qu√¢ntica associada a agita√ß√£o de corpos.",
            C: "Energia t√©rmica transferida entre objetos. / Energia cin√©tica associada a agita√ß√£o das mol√©culas.",
            D: "Energia cin√©tica transferida entre objetos. / Energia el√©trica associada a agita√ß√£o de corpos.",
          },
        },
        3: {
          enunciado:
            "Observe as diferen√ßas entre temperaturas mostradas pela imagem abaixo. Sobre as afirmativas a seguir, assinale o item CORRETO sobre temperatura:",
          alternativas: {
            A: "Quanto maior a agita√ß√£o das mol√©culas, maior ser√° sua temperatura.",
            B: "Quanto menor a agita√ß√£o das mol√©culas, maior ser√° sua temperatura.",
            C: "A temperatura √© o mesmo que calor quando elevados.",
            D: "A temperatura √© o mesmo que calor quando for m√≠nima.",
          },
        },
        4: {
          enunciado:
            "Um copo com leite quente √© colocado em uma bacia de √°gua fria com o objetivo de resfri√°-lo. Passando um tempo, percebe-se que tanto o copo quanto a √°gua da bacia est√£o com a mesma temperatura. Diante dessa situa√ß√£o, qual aspecto explica o fato de o copo e √°gua estarem com temperaturas iguais?",
          alternativas: {
            A: "A √°gua esfriar o copo quente.",
            B: "A √°gua estar mais fria que o copo.",
            C: "O copo estar mais quente que a √°gua.",
            D: "A troca de calor entre o copo quente e a √°gua fria.",
          },
        },
        5: {
          enunciado:
            "Imagine que h√° dois corpos com temperaturas diferentes em contato. No instante, ocorre a transfer√™ncia de calor de um para outro, at√© chegarem √† mesma temperatura. Essa transfer√™ncia de calor √© chamada de:",
          alternativas: {
            A: "difus√£o t√©rmica.",
            B: "equil√≠brio t√©rmico.",
            C: "convec√ß√£o t√©rmica.",
            D: "energia t√©rmica.",
          },
        },
        6: {
          enunciado:
            "De acordo com a Primeira Lei da Termodin√¢mica (Lei da Conserva√ß√£o da Energia), o que acontece com a energia el√©trica que 'some' quando voc√™ liga uma l√¢mpada comum?",
          alternativas: {
            A: "Ela √© completamente convertida em luz, sem nenhum calor gerado.",
            B: "Ela √© transformada em outras formas de energia, como luz e calor.",
            C: "A l√¢mpada cria a energia que √© transformada em luz.",
            D: "Ela √© destru√≠da assim que a l√¢mpada se apaga.",
          },
        },
        7: {
          enunciado:
            "A Segunda Lei da Termodin√¢mica √© frequentemente observada no dia a dia. Qual das situa√ß√µes abaixo √© um exemplo direto e espont√¢neo dessa lei?",
          alternativas: {
            A: "O vapor de √°gua quente de uma x√≠cara de caf√© esfriando at√© atingir a temperatura ambiente.",
            B: "Um carro se movendo mais r√°pido porque o motorista pisou no acelerador.",
            C: "Uma bola quicando no ch√£o e voltando exatamente para a mesma altura de onde foi solta.",
            D: "Uma bateria de celular sendo carregada ao ser conectada a uma tomada.",
          },
        },
        8: {
          enunciado:
            "O conceito de Entropia est√° relacionado √† desordem ou aleatoriedade de um sistema. Em qual das situa√ß√µes abaixo a entropia do sistema est√° naturalmente aumentando?",
          alternativas: {
            A: "Guardar todos os livros na prateleira, colocando a sala em ordem.",
            B: "Um cubo de gelo derretendo e se transformando em √°gua l√≠quida.",
            C: "Uma √°rvore crescendo e absorvendo nutrientes para formar uma estrutura organizada.",
            D: "Um g√°s sendo totalmente comprimido e mantido em um pequeno e apertado recipiente.",
          },
        },
        9: {
          enunciado:
            "Imagine que voc√™ quebrou um prato de cer√¢mica. Por que √© imposs√≠vel, de acordo com as Leis da Termodin√¢mica, que os peda√ßos se juntem espontaneamente e o prato se 'desquebre'?",
          alternativas: {
            A: "Porque o prato quebrado n√£o tem mais energia potencial para a reorganiza√ß√£o.",
            B: "Porque o calor que foi liberado no momento da quebra n√£o pode ser recuperado.",
            C: "Porque o processo violaria a Primeira Lei da Termodin√¢mica, criando energia do nada.",
            D: "Porque a quebra √© um processo que aumentou a entropia do sistema e, naturalmente, o sistema n√£o volta a um estado de menor entropia.",
          },
        },
        10: {
          enunciado:
            "A Seta do Tempo √© a ideia de que o tempo flui em uma √∫nica dire√ß√£o, do passado para o futuro. O que a Termodin√¢mica sugere ser a causa dessa dire√ß√£o √∫nica do tempo?",
          alternativas: {
            A: "A conserva√ß√£o de massa e volume em todas as rea√ß√µes qu√≠micas.",
            B: "O fato de a energia total no universo estar sempre diminuindo.",
            C: "O aumento constante da entropia (desordem) em todo o universo.",
            D: "A velocidade da luz no v√°cuo.",
          },
        },
        11: {
          enunciado:
            "Por que √© imposs√≠vel construir um motor de carro que converta 100% da energia do combust√≠vel em movimento, sem liberar nenhum calor para o ambiente?",
          alternativas: {
            A: "O motor precisa do calor liberado para funcionar, n√£o h√° outra forma.",
            B: "Porque o calor √© uma forma de energia mais valiosa que o movimento.",
            C: "Isso violaria a Segunda Lei, que estabelece que sempre haver√° uma energia dispersa (calor) em qualquer processo de transforma√ß√£o.",
            D: "Isso violaria a Primeira Lei, pois energia seria perdida no processo.",
          },
        },
        12: {
          enunciado:
            "Voc√™ mistura um pouco de tinta azul e tinta amarela em um pote, e elas se tornam espontaneamente tinta verde. Tentar separ√°-las para que voltem a ser azul e amarela √© muito dif√≠cil. Este processo de mistura est√° ligado ao conceito de:",
          alternativas: {
            A: "Aumento de Entropia.",
            B: "Trabalho Mec√¢nico.",
            C: "Conserva√ß√£o de Energia.",
            D: "Fluxo de Calor do Frio para o Quente.",
          },
        },
        13: {
          enunciado:
            "A Primeira Lei da Termodin√¢mica (Conserva√ß√£o de Energia) √© um obst√°culo para qual tipo de inven√ß√£o imposs√≠vel?",
          alternativas: {
            A: "Um gerador de energia que cria energia a partir do nada e funciona para sempre.",
            B: "Uma m√°quina que esfria uma bebida sem usar eletricidade.",
            C: "Um motor que consome pouca gasolina.",
            D: "Uma forma de energia que n√£o produz calor.",
          },
        },
        14: {
          enunciado:
            "Quando voc√™ coloca um peda√ßo de gelo em um copo de suco, o gelo absorve calor do suco e derrete. Qual das afirma√ß√µes abaixo melhor explica esse fen√¥meno usando a Segunda Lei da Termodin√¢mica?",
          alternativas: {
            A: "O calor est√° sendo criado na interface entre o gelo e o suco.",
            B: "O calor sempre se move espontaneamente do corpo com maior temperatura (suco) para o de menor temperatura (gelo).",
            C: "O suco e o gelo est√£o trocando entropia um com o outro.",
            D: "O suco congela porque perde calor para o gelo.",
          },
        },
        15: {
          enunciado:
            "A ferrugem (oxida√ß√£o) em um prego de ferro ocorre lentamente com o tempo, e o processo inverso (transformar a ferrugem de volta em ferro e oxig√™nio puros) √© muito dif√≠cil e requer gasto de energia. Isso demonstra o conceito de Seta do Tempo porque a ferrugem √© um processo:",
          alternativas: {
            A: "Completamente revers√≠vel, apenas esperando o tempo suficiente.",
            B: "Que s√≥ ocorre quando a temperatura est√° abaixo de zero.",
            C: "Que viola a Primeira Lei da Termodin√¢mica, pois a massa √© alterada.",
            D: "Onde o n√≠vel de entropia (desordem) do sistema total aumenta, tornando o processo irrevers√≠vel.",
          },
        },
        16: {
          enunciado:
            "Um quarto arrumado, depois de alguns dias sem ningu√©m arrumar, tende a ficar bagun√ßado. Isso est√° relacionado ao fato de que:",
          alternativas: {
            A: "A natureza tende √† organiza√ß√£o.",
            B: "A desordem tende a diminuir sozinha.",
            C: "A desordem tende a aumentar com o tempo.",
            D: "O quarto produz energia.",
          },
        },
        17: {
          enunciado:
            "Voc√™ j√° tinha estudado algum desses conte√∫dos em sala de aula?",
          alternativas: {
            A: "Sim, a maioria",
            B: "Sim, a minoria",
            C: "N√£o lembro",
          },
        },
      };

      // ---------------- MONTA QUEST√ïES ----------------
      const container = document.getElementById("questoes");

      for (let i = 1; i <= 17; i++) {
        let div = document.createElement("div");
        div.className = "questao";

        // T√≠tulo da quest√£o
        div.innerHTML = `<strong>Quest√£o ${i}</strong>`;

        // Enunciado
        div.innerHTML += `<div class="enunciado">${questoes[i].enunciado}</div>`;

        // Alternativas
        div.innerHTML += `<div class="alternativas">`;

        Object.entries(questoes[i].alternativas).forEach(([letra, texto]) => {
          div.innerHTML += `
            <label>
              <input type="radio" name="q${i}" value="${letra}">
              <strong>${letra}</strong>) ${texto}
            </label>`;
        });

        div.innerHTML += `</div>`;
        container.appendChild(div);
      }

      // ---------------- CORRIGIR E ENVIAR ----------------
      window.corrigir = function () {
        let acertos = 0;
        let respostasAluno = {};
        let questoesRespondidas = 0;

        for (let i = 1; i <= 17; i++) {
          let resposta = document.querySelector(`input[name="q${i}"]:checked`);
          if (resposta) {
            respostasAluno["q" + i] = resposta.value;
            questoesRespondidas++;
            if (i <= 16 && resposta.value === gabarito[i]) {
              acertos++;
            }
          }
        }

        if (questoesRespondidas === 0) {
          alert("Por favor, responda pelo menos uma quest√£o!");
          return;
        }

        document.getElementById("resultado").innerHTML =
          `‚úÖ Voc√™ acertou ${acertos} de 16 quest√µes!`;

        // üî• SALVA NO FIREBASE
        push(respostasRef, respostasAluno);

        // Limpa o formul√°rio
        document.getElementById("formulario").reset();
      };

      // ---------------- RESULTADOS GERAIS EM TEMPO REAL ----------------
      onValue(respostasRef, (snapshot) => {
        let dados = snapshot.val();
        if (!dados) {
          document.getElementById("dadosGerais").innerHTML =
            "<p>Aguardando respostas dos alunos...</p>";
          return;
        }

        let contagem = {};

        for (let i = 1; i <= 17; i++) {
          contagem[i] = {};
          Object.keys(questoes[i].alternativas).forEach((l) => {
            contagem[i][l] = 0;
          });
        }

        for (let id in dados) {
          let resp = dados[id];
          for (let q in resp) {
            let numero = parseInt(q.replace("q", ""));
            let letra = resp[q];
            if (contagem[numero] && contagem[numero][letra] !== undefined) {
              contagem[numero][letra]++;
            }
          }
        }

        let html = "";
        for (let i = 1; i <= 17; i++) {
          html += `<div style="margin-bottom: 20px;">`;
          html += `<strong style="color: #007bff;">Quest√£o ${i}</strong><br>`;
          html += `<span style="color: #666; font-size: 0.9em;">${questoes[i].enunciado}</span><br>`;
          html += `<div style="margin-top: 8px;">`;

          for (let letra in contagem[i]) {
            let porcentagem = 0;
            let total = Object.values(contagem[i]).reduce((a, b) => a + b, 0);
            if (total > 0) {
              porcentagem = ((contagem[i][letra] / total) * 100).toFixed(1);
            }
            html += `<span style="display: inline-block; margin-right: 15px;">
              ${letra}: ${contagem[i][letra]} respostas (${porcentagem}%)
            </span><br>`;
          }

          html += `</div></div>`;
        }

        document.getElementById("dadosGerais").innerHTML = html;
      });
    </script>
  </body>
</html>
